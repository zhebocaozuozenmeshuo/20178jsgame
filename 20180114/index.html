<!DOCTYPE html>
<html lang="zh-Hans">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>game 2</title>
  <link rel="stylesheet" href="style/main.css">
  <!-- gua game 相关文件 -->
  <script src="guagame/utils.js"></script>
  <script src="guagame/mouse.js"></script>
  <script src="guagame/gua_game.js"></script>
  <script src="guagame/gua_scene.js"></script>
  <script src="guagame/gua_image.js"></script>
  <!-- 场景文件 -->
  <script src="scene/main/paddle.js"></script>
  <script src="scene/main/ball.js"></script>
  <script src="scene/main/block.js"></script>
  <script src="scene/main/scene.js"></script>
  <!-- 结束和标题场景 -->
  <script src="scene/end/scene_end.js"></script>
  <script src="scene/title/scene_title.js"></script>
  <!-- 关卡数据 -->
  <script src="level.js"></script>
</head>

<body>
  <canvas id="id-canvas" width="400" height="600"></canvas>
  <!-- 读取配置文件自动生成 -->
  <div>
    <label for="">
      <input type="range" class="gua-auto-slider" id="" value="3" max="15" data-value="config.player_speed"> 玩家速度:
      <span class="gua-label"></span>
    </label>
  </div>
  <div>
    <label for="">
      <input type="range" class="gua-auto-slider" id="" value="3" max="5" min="0" data-value="config.bullet_speed"> 子弹速度:
      <span class="gua-label"></span>
    </label>
  </div>
  <div>
    <label for="">
      <input type="range" class="gua-auto-slider" id="" value="3" max="60" min="15" data-value="config.fire_cooldown"> 子弹冷却:
      <span class="gua-label"></span>
    </label>
  </div>
  <div>
    <label for="">
      <input type="range" class="gua-auto-slider" id="" value="3" max="2" min="-1" data-value="config.cloud_speed"> 云朵速度:
      <span class="gua-label"></span>
    </label>
  </div>
  <script>
    // 双向数据绑定
    var es = sel => document.querySelectorAll(sel)

    var bindAll = function(sel, eventName, callback) {
      var l = es(sel)
      for (var i = 0; i < l.length; i++) {
        var input = l[i];
        input.addEventListener(eventName, function(event) {
          callback(event)
        })
      }
    }

    bindAll('.gua-auto-slider', 'input', function(event) {
      var target = event.target
      var bindVar = target.dataset.value
      var v = target.value
      eval(bindVar + '=' + v)
      // 
      var label = target.closest('label').querySelector('.gua-label')
      log(label)
      label.innerText = v
    })
  </script>
  
  <script src="main.js"></script>
</body>

</html>